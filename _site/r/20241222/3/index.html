<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>qualtRicsでデータを読み込む - Taiyo Fujita</title>
    <link rel="stylesheet" href="/tai-psy/assets/css/style.css">
</head>
<body>
    <header class="site-header">
    <div class="header-container">
        <div class="header-brand">
            <h1 class="site-title">
                <a href="/tai-psy/">Taiyo Fujita</a>
            </h1>
        </div>
        <nav class="site-nav">
            <ul class="nav-list">
                <li><a href="/tai-psy/" class="nav-link">ホーム</a></li>
                <li><a href="/tai-psy/about-me/" class="nav-link">プロフィール</a></li>
                <li><a href="/tai-psy/about-research/" class="nav-link">研究テーマ</a></li>
                <li><a href="/tai-psy/about-cv/" class="nav-link">業績</a></li>
                <li><a href="/tai-psy/column/" class="nav-link">コラム</a></li>
                <li><a href="/tai-psy/links/" class="nav-link">リンク</a></li>
            </ul>
        </nav>
        <button class="mobile-menu-toggle" aria-label="メニューを開く">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</header>
    <main>
        
        <article class="post">
  <div class="page-header post-hero">
    <h1 class="post-title">qualtRicsでデータを読み込む</h1>
    <div class="post-meta">
      <span class="post-date">2024年12月22日</span>
    </div>
  </div>
  
  <nav class="post-breadcrumb">
    <a href="/tai-psy/">ホーム</a>
    <span class="sep">›</span>
    <a href="/tai-psy/column/">コラム</a>
    
    
      <span class="sep">›</span>
      
      <a href="/tai-psy/r/">R</a>
    
  </nav>

  <div class="post-content">
    <p>これまでQualtircsで取得したデータを分析するとき、Rで読み込む段階で少し前処理を行っていました。しかし、raw dataは本来加工するべきではありませんし、そもそも一々開いて処理していては面倒極まりないです。</p>

<p><a href="https://github.com/ropensci/qualtRics">qualtRics</a>を使うことでこのような前処理をなくすことができるというのを今更ながら知ったので、その方法を自分用にメモしておこうと思います。</p>

<p>ちなみに、私はQualtriqsのAPIキーを取得できないのでデータのエクスポートは自分でやる方法を用いていますが、APIを取得できるのならば直接エクスポートせずにする方法もあるらしいです。</p>

<h3 id="インストール">インストール</h3>

<p><code class="language-plaintext highlighter-rouge">install.packages()</code>でCRANからインストールします。<br />
そのままパッケージの読み込みましょう。</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"qualtRics"</span><span class="p">)</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">qualtRics</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>以下のようにgithubからもインストールできます。</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">devtools</span><span class="o">::</span><span class="n">install_github</span><span class="p">(</span><span class="s2">"ropensci/qualtRics"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h3 id="データのエクスポート">データのエクスポート</h3>

<p>Qualtriqsの「エクスポートとインポート」から「データをエクスポート」でCSVファイルを数値で指定してダウンロードします。</p>

<h3 id="データのインポート">データのインポート</h3>

<p>続いて、<code class="language-plaintext highlighter-rouge">read_survey()</code>を用いて読み込みます。<br />
ここではファイル名を今日の日付（20241222）としています。</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_survey</span><span class="p">(</span><span class="s2">"20241222.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>これで終わりです。簡単ですね。</p>

<h3 id="感想">感想</h3>

<p>完全に無知だった（これまでの方法を疑わなかった）ので、このように前処理を単純化できることに驚きました。おそらく多くの人にとっては当たり前の方法だったと思うので、本当に今更なことを言っているなと思われたことでしょう。それでもこの方法は早めに知れて良かったと思うので、メモに残しておくことにしました。</p>

<p>なお、<code class="language-plaintext highlighter-rouge">read.csv()</code>とは違って<code class="language-plaintext highlighter-rouge">fileEncoding</code>に対応していなさそうなので、回答に日本語等の文字が含まれている場合は普通にTSVファイルで出力する方法の方がよさそうです。</p>

<p>また、データのインポートするときに、私は各変数の項目の説明を表示する必要もないかなと思ったので、以下のようにadd_var_labelsの指定もして使用すると思います。</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_survey</span><span class="p">(</span><span class="s2">"20241222.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">add_var_labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

  </div>

  <footer class="post-footer">
    
      <div class="post-tags-section">
        <h3>タグ</h3>
        <div class="post-tags">
          
            <span class="tag-badge">#R</span>
          
            <span class="tag-badge">#qualtRics</span>
          
        </div>
      </div>
    
    <nav class="post-navigation">
      
        <a href="/r/20241221/2/" class="prev-post">&larr; Rの演算子について</a>
      
      
        <a href="/r/20241224/5/" class="next-post">lavaanguiでパス図を描く &rarr;</a>
      
    </nav>
  </footer>
</article>

    </main>
    <footer class="site-footer">
    <div class="footer-container">
        <div class="footer-content">
            <div class="footer-section">
                <h3>藤田 太陽</h3>
                <p>大阪大学大学院人間科学研究科<br>社会心理学研究分野</p>
            </div>
            <div class="footer-section">
                <h4>連絡先</h4>
                <p>sunday.taiyo[at]gmail.com</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Taiyo Fujita</p>
            <p class="footer-disclaimer">このサイトの内容は個人の見解であり、所属機関等とは関係ありません。</p>
        </div>
    </div>
</footer>

    <script src="/tai-psy/assets/js/main.js"></script>
</body>
</html>